{"version":3,"sources":["C:\\Users\\Dass\\Desktop\\Master1_YNOV\\DevLogiciel\\biblio\\src\\main\\webapp\\app\\admin\\metrics\\metrics.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\r\nimport { flatMap } from 'rxjs/operators';\r\n\r\nimport { MetricsService, Metrics, MetricsKey, ThreadDump, Thread } from './metrics.service';\r\n\r\n@Component({\r\n  selector: 'jhi-metrics',\r\n  templateUrl: './metrics.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n})\r\nexport class MetricsComponent implements OnInit {\r\n  metrics?: Metrics;\r\n  threads?: Thread[];\r\n  updatingMetrics = true;\r\n\r\n  constructor(private metricsService: MetricsService, private changeDetector: ChangeDetectorRef) {}\r\n\r\n  ngOnInit(): void {\r\n    this.refresh();\r\n  }\r\n\r\n  refresh(): void {\r\n    this.updatingMetrics = true;\r\n    this.metricsService\r\n      .getMetrics()\r\n      .pipe(\r\n        flatMap(\r\n          () => this.metricsService.threadDump(),\r\n          (metrics: Metrics, threadDump: ThreadDump) => {\r\n            this.metrics = metrics;\r\n            this.threads = threadDump.threads;\r\n            this.updatingMetrics = false;\r\n            this.changeDetector.detectChanges();\r\n          }\r\n        )\r\n      )\r\n      .subscribe();\r\n  }\r\n\r\n  metricsKeyExists(key: MetricsKey): boolean {\r\n    return this.metrics && this.metrics[key];\r\n  }\r\n\r\n  metricsKeyExistsAndObjectNotEmpty(key: MetricsKey): boolean {\r\n    return this.metrics && this.metrics[key] && JSON.stringify(this.metrics[key]) !== '{}';\r\n  }\r\n}\r\n"]}