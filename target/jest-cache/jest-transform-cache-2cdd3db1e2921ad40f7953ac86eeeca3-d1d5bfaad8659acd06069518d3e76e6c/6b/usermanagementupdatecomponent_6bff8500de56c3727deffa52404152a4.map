{"version":3,"sources":["C:\\Users\\Dass\\Desktop\\Master1_YNOV\\DevLogiciel\\biblio\\src\\main\\webapp\\app\\admin\\user-management\\user-management-update.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgBE;;;;;;;;;;;;;;;;;;;;AAhBF,MAAA,MAAA;AAAA;AAAA,0BAAA,OAAA,CAAA,eAAA,CAAA,CAAA;AACA,MAAA,OAAA;AAAA;AAAA,0BAAA,OAAA,CAAA,gBAAA,CAAA,CAAA;AACA,MAAA,QAAA;AAAA;AAAA,0BAAA,OAAA,CAAA,iBAAA,CAAA,CAAA;AAGA,MAAA,cAAA;AAAA;AAAA,0BAAA,OAAA,CAAA,4BAAA,CAAA,CAAA;;;;AAMA,IAAa,6BAA6B,GAA1C,MAAa,6BAAb,CAA0C;AAwBxC,EAAA,WAAA,CAAoB,WAApB,EAAsD,KAAtD,EAAqF,EAArF,EAAoG;AAAA;AAAA;AAAA;AAAhF,SAAA,WAAA,GAAA,WAAA;;AAAgF;AAAA;AAA9C,SAAA,KAAA,GAAA,KAAA;;AAA8C;AAAA;AAAf,SAAA,EAAA,GAAA,EAAA;;AAAe;AAAA;AAtBpG,SAAA,WAAA,GAAwB,EAAxB;;AAsBoG;AAAA;AArBpG,SAAA,QAAA,GAAW,KAAX;;AAqBoG;AAAA;AAnBpG,SAAA,QAAA,GAAW,KAAK,EAAL,CAAQ,KAAR,CAAc;AACvB,MAAA,EAAE,EAAE,EADmB;AAEvB,MAAA,KAAK,EAAE,CACL,EADK,EAEL,CACE,OAAA,CAAA,UAAA,CAAW,QADb,EAEE,OAAA,CAAA,UAAA,CAAW,SAAX,CAAqB,CAArB,CAFF,EAGE,OAAA,CAAA,UAAA,CAAW,SAAX,CAAqB,EAArB,CAHF,EAIE,OAAA,CAAA,UAAA,CAAW,OAAX,CAAmB,sFAAnB,CAJF,CAFK,CAFgB;AAWvB,MAAA,SAAS,EAAE,CAAC,EAAD,EAAK,CAAC,OAAA,CAAA,UAAA,CAAW,SAAX,CAAqB,EAArB,CAAD,CAAL,CAXY;AAYvB,MAAA,QAAQ,EAAE,CAAC,EAAD,EAAK,CAAC,OAAA,CAAA,UAAA,CAAW,SAAX,CAAqB,EAArB,CAAD,CAAL,CAZa;AAavB,MAAA,KAAK,EAAE,CAAC,EAAD,EAAK,CAAC,OAAA,CAAA,UAAA,CAAW,SAAX,CAAqB,CAArB,CAAD,EAA0B,OAAA,CAAA,UAAA,CAAW,SAAX,CAAqB,GAArB,CAA1B,EAAqD,OAAA,CAAA,UAAA,CAAW,KAAhE,CAAL,CAbgB;AAcvB,MAAA,SAAS,EAAE,EAdY;AAevB,MAAA,OAAO,EAAE,EAfc;AAgBvB,MAAA,WAAW,EAAE;AAhBU,KAAd,CAAX;AAmBwG;;AAExG,EAAA,QAAQ,GAAA;AAAA;AAAA;AAAA;AACN,SAAK,KAAL,CAAW,IAAX,CAAgB,SAAhB,CAA0B,CAAC;AAAE,MAAA;AAAF,KAAD,KAAa;AAAA;AAAA;AAAA;;AACrC,UAAI,IAAJ,EAAU;AAAA;AAAA;AAAA;AACR,aAAK,IAAL,GAAY,IAAZ;;AADQ;AAAA;;AAER,YAAI,KAAK,IAAL,CAAU,EAAV,KAAiB,SAArB,EAAgC;AAAA;AAAA;AAAA;AAC9B,eAAK,IAAL,CAAU,SAAV,GAAsB,IAAtB;AACD,SAFD;AAAA;AAAA;AAAA;AAAA;;AAFQ;AAKR,aAAK,UAAL,CAAgB,IAAhB;AACD,OAND;AAAA;AAAA;AAAA;AAAA;AAOD,KARD;;AADM;AAAA;AAUN,SAAK,WAAL,CAAiB,WAAjB,GAA+B,SAA/B,CAAyC,WAAW,IAAG;AAAA;AAAA;AAAA;AACrD,WAAK,WAAL,GAAmB,WAAnB;AACD,KAFD;AAGD;;AAED,EAAA,aAAa,GAAA;AAAA;AAAA;AAAA;AACX,IAAA,MAAM,CAAC,OAAP,CAAe,IAAf;AACD;;AAED,EAAA,IAAI,GAAA;AAAA;AAAA;AAAA;AACF,SAAK,QAAL,GAAgB,IAAhB;;AADE;AAAA;AAEF,SAAK,UAAL,CAAgB,KAAK,IAArB;;AAFE;AAAA;;AAGF,QAAI,KAAK,IAAL,CAAU,EAAV,KAAiB,SAArB,EAAgC;AAAA;AAAA;AAAA;AAC9B,WAAK,WAAL,CAAiB,MAAjB,CAAwB,KAAK,IAA7B,EAAmC,SAAnC,CACE,MAAM;AAAA;AAAA;AAAA;AAAA,oBAAK,aAAL;AAAoB,OAD5B,EAEE,MAAM;AAAA;AAAA;AAAA;AAAA,oBAAK,WAAL;AAAkB,OAF1B;AAID,KALD,MAKO;AAAA;AAAA;AAAA;AACL,WAAK,IAAL,CAAU,OAAV,GAAoB,IAApB;;AADK;AAAA;AAEL,WAAK,WAAL,CAAiB,MAAjB,CAAwB,KAAK,IAA7B,EAAmC,SAAnC,CACE,MAAM;AAAA;AAAA;AAAA;AAAA,oBAAK,aAAL;AAAoB,OAD5B,EAEE,MAAM;AAAA;AAAA;AAAA;AAAA,oBAAK,WAAL;AAAkB,OAF1B;AAID;AACF;;AAEO,EAAA,UAAU,CAAC,IAAD,EAAW;AAAA;AAAA;AAAA;AAC3B,SAAK,QAAL,CAAc,UAAd,CAAyB;AACvB,MAAA,EAAE,EAAE,IAAI,CAAC,EADc;AAEvB,MAAA,KAAK,EAAE,IAAI,CAAC,KAFW;AAGvB,MAAA,SAAS,EAAE,IAAI,CAAC,SAHO;AAIvB,MAAA,QAAQ,EAAE,IAAI,CAAC,QAJQ;AAKvB,MAAA,KAAK,EAAE,IAAI,CAAC,KALW;AAMvB,MAAA,SAAS,EAAE,IAAI,CAAC,SANO;AAOvB,MAAA,OAAO,EAAE,IAAI,CAAC,OAPS;AAQvB,MAAA,WAAW,EAAE,IAAI,CAAC;AARK,KAAzB;AAUD;;AAEO,EAAA,UAAU,CAAC,IAAD,EAAW;AAAA;AAAA;AAAA;AAC3B,IAAA,IAAI,CAAC,KAAL,GAAa,KAAK,QAAL,CAAc,GAAd,CAAkB,CAAC,OAAD,CAAlB,EAA8B,KAA3C;;AAD2B;AAAA;AAE3B,IAAA,IAAI,CAAC,SAAL,GAAiB,KAAK,QAAL,CAAc,GAAd,CAAkB,CAAC,WAAD,CAAlB,EAAkC,KAAnD;;AAF2B;AAAA;AAG3B,IAAA,IAAI,CAAC,QAAL,GAAgB,KAAK,QAAL,CAAc,GAAd,CAAkB,CAAC,UAAD,CAAlB,EAAiC,KAAjD;;AAH2B;AAAA;AAI3B,IAAA,IAAI,CAAC,KAAL,GAAa,KAAK,QAAL,CAAc,GAAd,CAAkB,CAAC,OAAD,CAAlB,EAA8B,KAA3C;;AAJ2B;AAAA;AAK3B,IAAA,IAAI,CAAC,SAAL,GAAiB,KAAK,QAAL,CAAc,GAAd,CAAkB,CAAC,WAAD,CAAlB,EAAkC,KAAnD;;AAL2B;AAAA;AAM3B,IAAA,IAAI,CAAC,OAAL,GAAe,KAAK,QAAL,CAAc,GAAd,CAAkB,CAAC,SAAD,CAAlB,EAAgC,KAA/C;;AAN2B;AAAA;AAO3B,IAAA,IAAI,CAAC,WAAL,GAAmB,KAAK,QAAL,CAAc,GAAd,CAAkB,CAAC,aAAD,CAAlB,EAAoC,KAAvD;AACD;;AAEO,EAAA,aAAa,GAAA;AAAA;AAAA;AAAA;AACnB,SAAK,QAAL,GAAgB,KAAhB;;AADmB;AAAA;AAEnB,SAAK,aAAL;AACD;;AAEO,EAAA,WAAW,GAAA;AAAA;AAAA;AAAA;AACjB,SAAK,QAAL,GAAgB,KAAhB;AACD;;AA5FuC,CAA1C;;;;AAAa,6BAA6B,GAAA,OAAA,CAAA,UAAA,CAAA,CAJzC,MAAA,CAAA,SAAA,CAAU;AACT,EAAA,QAAQ,EAAE,sBADD;AAET,EAAA,QAAA,EAAA,OAAA,CAAa,yCAAb;AAFS,CAAV,CAIyC,E,yCAwBP,cAAA,CAAA,W,EAA4B,QAAA,CAAA,c,EAA4B,OAAA,CAAA,W,EAxBjD,CAAA,EAA7B,6BAA6B,CAA7B;;;;AAAA,OAAA,CAAA,6BAAA,GAAA,6BAAA","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport { ActivatedRoute } from '@angular/router';\r\n\r\nimport { User } from 'app/core/user/user.model';\r\nimport { UserService } from 'app/core/user/user.service';\r\n\r\n@Component({\r\n  selector: 'jhi-user-mgmt-update',\r\n  templateUrl: './user-management-update.component.html',\r\n})\r\nexport class UserManagementUpdateComponent implements OnInit {\r\n  user!: User;\r\n  authorities: string[] = [];\r\n  isSaving = false;\r\n\r\n  editForm = this.fb.group({\r\n    id: [],\r\n    login: [\r\n      '',\r\n      [\r\n        Validators.required,\r\n        Validators.minLength(1),\r\n        Validators.maxLength(50),\r\n        Validators.pattern('^[a-zA-Z0-9!$&*+=?^_`{|}~.-]+@[a-zA-Z0-9-]+(?:\\\\.[a-zA-Z0-9-]+)*$|^[_.@A-Za-z0-9-]+$'),\r\n      ],\r\n    ],\r\n    firstName: ['', [Validators.maxLength(50)]],\r\n    lastName: ['', [Validators.maxLength(50)]],\r\n    email: ['', [Validators.minLength(5), Validators.maxLength(254), Validators.email]],\r\n    activated: [],\r\n    langKey: [],\r\n    authorities: [],\r\n  });\r\n\r\n  constructor(private userService: UserService, private route: ActivatedRoute, private fb: FormBuilder) {}\r\n\r\n  ngOnInit(): void {\r\n    this.route.data.subscribe(({ user }) => {\r\n      if (user) {\r\n        this.user = user;\r\n        if (this.user.id === undefined) {\r\n          this.user.activated = true;\r\n        }\r\n        this.updateForm(user);\r\n      }\r\n    });\r\n    this.userService.authorities().subscribe(authorities => {\r\n      this.authorities = authorities;\r\n    });\r\n  }\r\n\r\n  previousState(): void {\r\n    window.history.back();\r\n  }\r\n\r\n  save(): void {\r\n    this.isSaving = true;\r\n    this.updateUser(this.user);\r\n    if (this.user.id !== undefined) {\r\n      this.userService.update(this.user).subscribe(\r\n        () => this.onSaveSuccess(),\r\n        () => this.onSaveError()\r\n      );\r\n    } else {\r\n      this.user.langKey = 'en';\r\n      this.userService.create(this.user).subscribe(\r\n        () => this.onSaveSuccess(),\r\n        () => this.onSaveError()\r\n      );\r\n    }\r\n  }\r\n\r\n  private updateForm(user: User): void {\r\n    this.editForm.patchValue({\r\n      id: user.id,\r\n      login: user.login,\r\n      firstName: user.firstName,\r\n      lastName: user.lastName,\r\n      email: user.email,\r\n      activated: user.activated,\r\n      langKey: user.langKey,\r\n      authorities: user.authorities,\r\n    });\r\n  }\r\n\r\n  private updateUser(user: User): void {\r\n    user.login = this.editForm.get(['login'])!.value;\r\n    user.firstName = this.editForm.get(['firstName'])!.value;\r\n    user.lastName = this.editForm.get(['lastName'])!.value;\r\n    user.email = this.editForm.get(['email'])!.value;\r\n    user.activated = this.editForm.get(['activated'])!.value;\r\n    user.langKey = this.editForm.get(['langKey'])!.value;\r\n    user.authorities = this.editForm.get(['authorities'])!.value;\r\n  }\r\n\r\n  private onSaveSuccess(): void {\r\n    this.isSaving = false;\r\n    this.previousState();\r\n  }\r\n\r\n  private onSaveError(): void {\r\n    this.isSaving = false;\r\n  }\r\n}\r\n"]}