4e95561ac1ce62ee22d3a54c03d40861
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const testing_1 = require("@angular/core/testing");
const testing_2 = require("@angular/common/http/testing");
const moment = require("moment");
const input_constants_1 = require("app/shared/constants/input.constants");
const emprunt_service_1 = require("app/entities/emprunt/emprunt.service");
const emprunt_model_1 = require("app/shared/model/emprunt.model");
describe('Service Tests', () => {
    describe('Emprunt Service', () => {
        let injector;
        let service;
        let httpMock;
        let elemDefault;
        let expectedResult;
        let currentDate;
        beforeEach(() => {
            testing_1.TestBed.configureTestingModule({
                imports: [testing_2.HttpClientTestingModule],
            });
            expectedResult = null;
            injector = testing_1.getTestBed();
            service = injector.get(emprunt_service_1.EmpruntService);
            httpMock = injector.get(testing_2.HttpTestingController);
            currentDate = moment();
            elemDefault = new emprunt_model_1.Emprunt(0, currentDate);
        });
        describe('Service methods', () => {
            it('should find an element', () => {
                const returnedFromService = Object.assign({
                    dateEmprunt: currentDate.format(input_constants_1.DATE_FORMAT),
                }, elemDefault);
                service.find(123).subscribe(resp => (expectedResult = resp.body));
                const req = httpMock.expectOne({ method: 'GET' });
                req.flush(returnedFromService);
                expect(expectedResult).toMatchObject(elemDefault);
            });
            it('should create a Emprunt', () => {
                const returnedFromService = Object.assign({
                    id: 0,
                    dateEmprunt: currentDate.format(input_constants_1.DATE_FORMAT),
                }, elemDefault);
                const expected = Object.assign({
                    dateEmprunt: currentDate,
                }, returnedFromService);
                service.create(new emprunt_model_1.Emprunt()).subscribe(resp => (expectedResult = resp.body));
                const req = httpMock.expectOne({ method: 'POST' });
                req.flush(returnedFromService);
                expect(expectedResult).toMatchObject(expected);
            });
            it('should update a Emprunt', () => {
                const returnedFromService = Object.assign({
                    dateEmprunt: currentDate.format(input_constants_1.DATE_FORMAT),
                }, elemDefault);
                const expected = Object.assign({
                    dateEmprunt: currentDate,
                }, returnedFromService);
                service.update(expected).subscribe(resp => (expectedResult = resp.body));
                const req = httpMock.expectOne({ method: 'PUT' });
                req.flush(returnedFromService);
                expect(expectedResult).toMatchObject(expected);
            });
            it('should return a list of Emprunt', () => {
                const returnedFromService = Object.assign({
                    dateEmprunt: currentDate.format(input_constants_1.DATE_FORMAT),
                }, elemDefault);
                const expected = Object.assign({
                    dateEmprunt: currentDate,
                }, returnedFromService);
                service.query().subscribe(resp => (expectedResult = resp.body));
                const req = httpMock.expectOne({ method: 'GET' });
                req.flush([returnedFromService]);
                httpMock.verify();
                expect(expectedResult).toContainEqual(expected);
            });
            it('should delete a Emprunt', () => {
                service.delete(123).subscribe(resp => (expectedResult = resp.ok));
                const req = httpMock.expectOne({ method: 'DELETE' });
                req.flush({ status: 200 });
                expect(expectedResult);
            });
        });
        afterEach(() => {
            httpMock.verify();
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxEYXNzXFxEZXNrdG9wXFxNYXN0ZXIxX1lOT1ZcXERldkxvZ2ljaWVsXFxiaWJsaW9cXHNyY1xcdGVzdFxcamF2YXNjcmlwdFxcc3BlY1xcYXBwXFxlbnRpdGllc1xcZW1wcnVudFxcZW1wcnVudC5zZXJ2aWNlLnNwZWMudHMiLCJtYXBwaW5ncyI6Ijs7QUFBQSxtREFBNEQ7QUFDNUQsMERBQThGO0FBQzlGLGlDQUFpQztBQUNqQywwRUFBbUU7QUFDbkUsMEVBQXNFO0FBQ3RFLGtFQUFtRTtBQUVuRSxRQUFRLENBQUMsZUFBZSxFQUFFLEdBQUcsRUFBRTtJQUM3QixRQUFRLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFO1FBQy9CLElBQUksUUFBaUIsQ0FBQztRQUN0QixJQUFJLE9BQXVCLENBQUM7UUFDNUIsSUFBSSxRQUErQixDQUFDO1FBQ3BDLElBQUksV0FBcUIsQ0FBQztRQUMxQixJQUFJLGNBQXNELENBQUM7UUFDM0QsSUFBSSxXQUEwQixDQUFDO1FBRS9CLFVBQVUsQ0FBQyxHQUFHLEVBQUU7WUFDZCxpQkFBTyxDQUFDLHNCQUFzQixDQUFDO2dCQUM3QixPQUFPLEVBQUUsQ0FBQyxpQ0FBdUIsQ0FBQzthQUNuQyxDQUFDLENBQUM7WUFDSCxjQUFjLEdBQUcsSUFBSSxDQUFDO1lBQ3RCLFFBQVEsR0FBRyxvQkFBVSxFQUFFLENBQUM7WUFDeEIsT0FBTyxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsZ0NBQWMsQ0FBQyxDQUFDO1lBQ3ZDLFFBQVEsR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLCtCQUFxQixDQUFDLENBQUM7WUFDL0MsV0FBVyxHQUFHLE1BQU0sRUFBRSxDQUFDO1lBRXZCLFdBQVcsR0FBRyxJQUFJLHVCQUFPLENBQUMsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxDQUFDO1FBQzVDLENBQUMsQ0FBQyxDQUFDO1FBRUgsUUFBUSxDQUFDLGlCQUFpQixFQUFFLEdBQUcsRUFBRTtZQUMvQixFQUFFLENBQUMsd0JBQXdCLEVBQUUsR0FBRyxFQUFFO2dCQUNoQyxNQUFNLG1CQUFtQixHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQ3ZDO29CQUNFLFdBQVcsRUFBRSxXQUFXLENBQUMsTUFBTSxDQUFDLDZCQUFXLENBQUM7aUJBQzdDLEVBQ0QsV0FBVyxDQUNaLENBQUM7Z0JBRUYsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFFbEUsTUFBTSxHQUFHLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO2dCQUNsRCxHQUFHLENBQUMsS0FBSyxDQUFDLG1CQUFtQixDQUFDLENBQUM7Z0JBQy9CLE1BQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQyxhQUFhLENBQUMsV0FBVyxDQUFDLENBQUM7WUFDcEQsQ0FBQyxDQUFDLENBQUM7WUFFSCxFQUFFLENBQUMseUJBQXlCLEVBQUUsR0FBRyxFQUFFO2dCQUNqQyxNQUFNLG1CQUFtQixHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQ3ZDO29CQUNFLEVBQUUsRUFBRSxDQUFDO29CQUNMLFdBQVcsRUFBRSxXQUFXLENBQUMsTUFBTSxDQUFDLDZCQUFXLENBQUM7aUJBQzdDLEVBQ0QsV0FBVyxDQUNaLENBQUM7Z0JBRUYsTUFBTSxRQUFRLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FDNUI7b0JBQ0UsV0FBVyxFQUFFLFdBQVc7aUJBQ3pCLEVBQ0QsbUJBQW1CLENBQ3BCLENBQUM7Z0JBRUYsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLHVCQUFPLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUU5RSxNQUFNLEdBQUcsR0FBRyxRQUFRLENBQUMsU0FBUyxDQUFDLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUM7Z0JBQ25ELEdBQUcsQ0FBQyxLQUFLLENBQUMsbUJBQW1CLENBQUMsQ0FBQztnQkFDL0IsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNqRCxDQUFDLENBQUMsQ0FBQztZQUVILEVBQUUsQ0FBQyx5QkFBeUIsRUFBRSxHQUFHLEVBQUU7Z0JBQ2pDLE1BQU0sbUJBQW1CLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FDdkM7b0JBQ0UsV0FBVyxFQUFFLFdBQVcsQ0FBQyxNQUFNLENBQUMsNkJBQVcsQ0FBQztpQkFDN0MsRUFDRCxXQUFXLENBQ1osQ0FBQztnQkFFRixNQUFNLFFBQVEsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUM1QjtvQkFDRSxXQUFXLEVBQUUsV0FBVztpQkFDekIsRUFDRCxtQkFBbUIsQ0FDcEIsQ0FBQztnQkFFRixPQUFPLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUV6RSxNQUFNLEdBQUcsR0FBRyxRQUFRLENBQUMsU0FBUyxDQUFDLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7Z0JBQ2xELEdBQUcsQ0FBQyxLQUFLLENBQUMsbUJBQW1CLENBQUMsQ0FBQztnQkFDL0IsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNqRCxDQUFDLENBQUMsQ0FBQztZQUVILEVBQUUsQ0FBQyxpQ0FBaUMsRUFBRSxHQUFHLEVBQUU7Z0JBQ3pDLE1BQU0sbUJBQW1CLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FDdkM7b0JBQ0UsV0FBVyxFQUFFLFdBQVcsQ0FBQyxNQUFNLENBQUMsNkJBQVcsQ0FBQztpQkFDN0MsRUFDRCxXQUFXLENBQ1osQ0FBQztnQkFFRixNQUFNLFFBQVEsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUM1QjtvQkFDRSxXQUFXLEVBQUUsV0FBVztpQkFDekIsRUFDRCxtQkFBbUIsQ0FDcEIsQ0FBQztnQkFFRixPQUFPLENBQUMsS0FBSyxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBRWhFLE1BQU0sR0FBRyxHQUFHLFFBQVEsQ0FBQyxTQUFTLENBQUMsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztnQkFDbEQsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQztnQkFDakMsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDO2dCQUNsQixNQUFNLENBQUMsY0FBYyxDQUFDLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQ2xELENBQUMsQ0FBQyxDQUFDO1lBRUgsRUFBRSxDQUFDLHlCQUF5QixFQUFFLEdBQUcsRUFBRTtnQkFDakMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFFbEUsTUFBTSxHQUFHLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQyxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDO2dCQUNyRCxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7Z0JBQzNCLE1BQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUN6QixDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsU0FBUyxDQUFDLEdBQUcsRUFBRTtZQUNiLFFBQVEsQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNwQixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxEYXNzXFxEZXNrdG9wXFxNYXN0ZXIxX1lOT1ZcXERldkxvZ2ljaWVsXFxiaWJsaW9cXHNyY1xcdGVzdFxcamF2YXNjcmlwdFxcc3BlY1xcYXBwXFxlbnRpdGllc1xcZW1wcnVudFxcZW1wcnVudC5zZXJ2aWNlLnNwZWMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGVzdEJlZCwgZ2V0VGVzdEJlZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvdGVzdGluZyc7XHJcbmltcG9ydCB7IEh0dHBDbGllbnRUZXN0aW5nTW9kdWxlLCBIdHRwVGVzdGluZ0NvbnRyb2xsZXIgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cC90ZXN0aW5nJztcclxuaW1wb3J0ICogYXMgbW9tZW50IGZyb20gJ21vbWVudCc7XHJcbmltcG9ydCB7IERBVEVfRk9STUFUIH0gZnJvbSAnYXBwL3NoYXJlZC9jb25zdGFudHMvaW5wdXQuY29uc3RhbnRzJztcclxuaW1wb3J0IHsgRW1wcnVudFNlcnZpY2UgfSBmcm9tICdhcHAvZW50aXRpZXMvZW1wcnVudC9lbXBydW50LnNlcnZpY2UnO1xyXG5pbXBvcnQgeyBJRW1wcnVudCwgRW1wcnVudCB9IGZyb20gJ2FwcC9zaGFyZWQvbW9kZWwvZW1wcnVudC5tb2RlbCc7XHJcblxyXG5kZXNjcmliZSgnU2VydmljZSBUZXN0cycsICgpID0+IHtcclxuICBkZXNjcmliZSgnRW1wcnVudCBTZXJ2aWNlJywgKCkgPT4ge1xyXG4gICAgbGV0IGluamVjdG9yOiBUZXN0QmVkO1xyXG4gICAgbGV0IHNlcnZpY2U6IEVtcHJ1bnRTZXJ2aWNlO1xyXG4gICAgbGV0IGh0dHBNb2NrOiBIdHRwVGVzdGluZ0NvbnRyb2xsZXI7XHJcbiAgICBsZXQgZWxlbURlZmF1bHQ6IElFbXBydW50O1xyXG4gICAgbGV0IGV4cGVjdGVkUmVzdWx0OiBJRW1wcnVudCB8IElFbXBydW50W10gfCBib29sZWFuIHwgbnVsbDtcclxuICAgIGxldCBjdXJyZW50RGF0ZTogbW9tZW50Lk1vbWVudDtcclxuXHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgVGVzdEJlZC5jb25maWd1cmVUZXN0aW5nTW9kdWxlKHtcclxuICAgICAgICBpbXBvcnRzOiBbSHR0cENsaWVudFRlc3RpbmdNb2R1bGVdLFxyXG4gICAgICB9KTtcclxuICAgICAgZXhwZWN0ZWRSZXN1bHQgPSBudWxsO1xyXG4gICAgICBpbmplY3RvciA9IGdldFRlc3RCZWQoKTtcclxuICAgICAgc2VydmljZSA9IGluamVjdG9yLmdldChFbXBydW50U2VydmljZSk7XHJcbiAgICAgIGh0dHBNb2NrID0gaW5qZWN0b3IuZ2V0KEh0dHBUZXN0aW5nQ29udHJvbGxlcik7XHJcbiAgICAgIGN1cnJlbnREYXRlID0gbW9tZW50KCk7XHJcblxyXG4gICAgICBlbGVtRGVmYXVsdCA9IG5ldyBFbXBydW50KDAsIGN1cnJlbnREYXRlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGRlc2NyaWJlKCdTZXJ2aWNlIG1ldGhvZHMnLCAoKSA9PiB7XHJcbiAgICAgIGl0KCdzaG91bGQgZmluZCBhbiBlbGVtZW50JywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJldHVybmVkRnJvbVNlcnZpY2UgPSBPYmplY3QuYXNzaWduKFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBkYXRlRW1wcnVudDogY3VycmVudERhdGUuZm9ybWF0KERBVEVfRk9STUFUKSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBlbGVtRGVmYXVsdFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHNlcnZpY2UuZmluZCgxMjMpLnN1YnNjcmliZShyZXNwID0+IChleHBlY3RlZFJlc3VsdCA9IHJlc3AuYm9keSkpO1xyXG5cclxuICAgICAgICBjb25zdCByZXEgPSBodHRwTW9jay5leHBlY3RPbmUoeyBtZXRob2Q6ICdHRVQnIH0pO1xyXG4gICAgICAgIHJlcS5mbHVzaChyZXR1cm5lZEZyb21TZXJ2aWNlKTtcclxuICAgICAgICBleHBlY3QoZXhwZWN0ZWRSZXN1bHQpLnRvTWF0Y2hPYmplY3QoZWxlbURlZmF1bHQpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgY3JlYXRlIGEgRW1wcnVudCcsICgpID0+IHtcclxuICAgICAgICBjb25zdCByZXR1cm5lZEZyb21TZXJ2aWNlID0gT2JqZWN0LmFzc2lnbihcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgaWQ6IDAsXHJcbiAgICAgICAgICAgIGRhdGVFbXBydW50OiBjdXJyZW50RGF0ZS5mb3JtYXQoREFURV9GT1JNQVQpLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGVsZW1EZWZhdWx0XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc3QgZXhwZWN0ZWQgPSBPYmplY3QuYXNzaWduKFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBkYXRlRW1wcnVudDogY3VycmVudERhdGUsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgcmV0dXJuZWRGcm9tU2VydmljZVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHNlcnZpY2UuY3JlYXRlKG5ldyBFbXBydW50KCkpLnN1YnNjcmliZShyZXNwID0+IChleHBlY3RlZFJlc3VsdCA9IHJlc3AuYm9keSkpO1xyXG5cclxuICAgICAgICBjb25zdCByZXEgPSBodHRwTW9jay5leHBlY3RPbmUoeyBtZXRob2Q6ICdQT1NUJyB9KTtcclxuICAgICAgICByZXEuZmx1c2gocmV0dXJuZWRGcm9tU2VydmljZSk7XHJcbiAgICAgICAgZXhwZWN0KGV4cGVjdGVkUmVzdWx0KS50b01hdGNoT2JqZWN0KGV4cGVjdGVkKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIHVwZGF0ZSBhIEVtcHJ1bnQnLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgcmV0dXJuZWRGcm9tU2VydmljZSA9IE9iamVjdC5hc3NpZ24oXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGRhdGVFbXBydW50OiBjdXJyZW50RGF0ZS5mb3JtYXQoREFURV9GT1JNQVQpLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIGVsZW1EZWZhdWx0XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgY29uc3QgZXhwZWN0ZWQgPSBPYmplY3QuYXNzaWduKFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBkYXRlRW1wcnVudDogY3VycmVudERhdGUsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgcmV0dXJuZWRGcm9tU2VydmljZVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHNlcnZpY2UudXBkYXRlKGV4cGVjdGVkKS5zdWJzY3JpYmUocmVzcCA9PiAoZXhwZWN0ZWRSZXN1bHQgPSByZXNwLmJvZHkpKTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVxID0gaHR0cE1vY2suZXhwZWN0T25lKHsgbWV0aG9kOiAnUFVUJyB9KTtcclxuICAgICAgICByZXEuZmx1c2gocmV0dXJuZWRGcm9tU2VydmljZSk7XHJcbiAgICAgICAgZXhwZWN0KGV4cGVjdGVkUmVzdWx0KS50b01hdGNoT2JqZWN0KGV4cGVjdGVkKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpdCgnc2hvdWxkIHJldHVybiBhIGxpc3Qgb2YgRW1wcnVudCcsICgpID0+IHtcclxuICAgICAgICBjb25zdCByZXR1cm5lZEZyb21TZXJ2aWNlID0gT2JqZWN0LmFzc2lnbihcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgZGF0ZUVtcHJ1bnQ6IGN1cnJlbnREYXRlLmZvcm1hdChEQVRFX0ZPUk1BVCksXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgZWxlbURlZmF1bHRcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCBleHBlY3RlZCA9IE9iamVjdC5hc3NpZ24oXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGRhdGVFbXBydW50OiBjdXJyZW50RGF0ZSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICByZXR1cm5lZEZyb21TZXJ2aWNlXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgc2VydmljZS5xdWVyeSgpLnN1YnNjcmliZShyZXNwID0+IChleHBlY3RlZFJlc3VsdCA9IHJlc3AuYm9keSkpO1xyXG5cclxuICAgICAgICBjb25zdCByZXEgPSBodHRwTW9jay5leHBlY3RPbmUoeyBtZXRob2Q6ICdHRVQnIH0pO1xyXG4gICAgICAgIHJlcS5mbHVzaChbcmV0dXJuZWRGcm9tU2VydmljZV0pO1xyXG4gICAgICAgIGh0dHBNb2NrLnZlcmlmeSgpO1xyXG4gICAgICAgIGV4cGVjdChleHBlY3RlZFJlc3VsdCkudG9Db250YWluRXF1YWwoZXhwZWN0ZWQpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGl0KCdzaG91bGQgZGVsZXRlIGEgRW1wcnVudCcsICgpID0+IHtcclxuICAgICAgICBzZXJ2aWNlLmRlbGV0ZSgxMjMpLnN1YnNjcmliZShyZXNwID0+IChleHBlY3RlZFJlc3VsdCA9IHJlc3Aub2spKTtcclxuXHJcbiAgICAgICAgY29uc3QgcmVxID0gaHR0cE1vY2suZXhwZWN0T25lKHsgbWV0aG9kOiAnREVMRVRFJyB9KTtcclxuICAgICAgICByZXEuZmx1c2goeyBzdGF0dXM6IDIwMCB9KTtcclxuICAgICAgICBleHBlY3QoZXhwZWN0ZWRSZXN1bHQpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGFmdGVyRWFjaCgoKSA9PiB7XHJcbiAgICAgIGh0dHBNb2NrLnZlcmlmeSgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXSwidmVyc2lvbiI6M30=