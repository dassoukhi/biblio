{"version":3,"sources":["C:\\Users\\Dass\\Desktop\\Master1_YNOV\\DevLogiciel\\biblio\\src\\main\\webapp\\app\\account\\password-reset\\finish\\password-reset-finish.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit, AfterViewInit, ElementRef, ViewChild } from '@angular/core';\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport { ActivatedRoute } from '@angular/router';\r\n\r\nimport { LoginModalService } from 'app/core/login/login-modal.service';\r\nimport { PasswordResetFinishService } from './password-reset-finish.service';\r\n\r\n@Component({\r\n  selector: 'jhi-password-reset-finish',\r\n  templateUrl: './password-reset-finish.component.html',\r\n})\r\nexport class PasswordResetFinishComponent implements OnInit, AfterViewInit {\r\n  @ViewChild('newPassword', { static: false })\r\n  newPassword?: ElementRef;\r\n\r\n  initialized = false;\r\n  doNotMatch = false;\r\n  error = false;\r\n  success = false;\r\n  key = '';\r\n\r\n  passwordForm = this.fb.group({\r\n    newPassword: ['', [Validators.required, Validators.minLength(4), Validators.maxLength(50)]],\r\n    confirmPassword: ['', [Validators.required, Validators.minLength(4), Validators.maxLength(50)]],\r\n  });\r\n\r\n  constructor(\r\n    private passwordResetFinishService: PasswordResetFinishService,\r\n    private loginModalService: LoginModalService,\r\n    private route: ActivatedRoute,\r\n    private fb: FormBuilder\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.route.queryParams.subscribe(params => {\r\n      if (params['key']) {\r\n        this.key = params['key'];\r\n      }\r\n      this.initialized = true;\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    if (this.newPassword) {\r\n      this.newPassword.nativeElement.focus();\r\n    }\r\n  }\r\n\r\n  finishReset(): void {\r\n    this.doNotMatch = false;\r\n    this.error = false;\r\n\r\n    const newPassword = this.passwordForm.get(['newPassword'])!.value;\r\n    const confirmPassword = this.passwordForm.get(['confirmPassword'])!.value;\r\n\r\n    if (newPassword !== confirmPassword) {\r\n      this.doNotMatch = true;\r\n    } else {\r\n      this.passwordResetFinishService.save(this.key, newPassword).subscribe(\r\n        () => (this.success = true),\r\n        () => (this.error = true)\r\n      );\r\n    }\r\n  }\r\n\r\n  login(): void {\r\n    this.loginModalService.open();\r\n  }\r\n}\r\n"]}