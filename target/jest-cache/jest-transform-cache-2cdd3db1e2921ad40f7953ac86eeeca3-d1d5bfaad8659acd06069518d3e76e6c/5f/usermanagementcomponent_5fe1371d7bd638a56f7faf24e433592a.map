{"version":3,"sources":["C:\\Users\\Dass\\Desktop\\Master1_YNOV\\DevLogiciel\\biblio\\src\\main\\webapp\\app\\admin\\user-management\\user-management.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { HttpResponse, HttpHeaders } from '@angular/common/http';\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { Subscription, combineLatest } from 'rxjs';\r\nimport { ActivatedRoute, ParamMap, Router, Data } from '@angular/router';\r\nimport { JhiEventManager } from 'ng-jhipster';\r\n\r\nimport { ITEMS_PER_PAGE } from 'app/shared/constants/pagination.constants';\r\nimport { AccountService } from 'app/core/auth/account.service';\r\nimport { Account } from 'app/core/user/account.model';\r\nimport { UserService } from 'app/core/user/user.service';\r\nimport { User } from 'app/core/user/user.model';\r\nimport { UserManagementDeleteDialogComponent } from './user-management-delete-dialog.component';\r\n\r\n@Component({\r\n  selector: 'jhi-user-mgmt',\r\n  templateUrl: './user-management.component.html',\r\n})\r\nexport class UserManagementComponent implements OnInit, OnDestroy {\r\n  currentAccount: Account | null = null;\r\n  users: User[] | null = null;\r\n  userListSubscription?: Subscription;\r\n  totalItems = 0;\r\n  itemsPerPage = ITEMS_PER_PAGE;\r\n  page!: number;\r\n  predicate!: string;\r\n  ascending!: boolean;\r\n\r\n  constructor(\r\n    private userService: UserService,\r\n    private accountService: AccountService,\r\n    private activatedRoute: ActivatedRoute,\r\n    private router: Router,\r\n    private eventManager: JhiEventManager,\r\n    private modalService: NgbModal\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.accountService.identity().subscribe(account => (this.currentAccount = account));\r\n    this.userListSubscription = this.eventManager.subscribe('userListModification', () => this.loadAll());\r\n    this.handleNavigation();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    if (this.userListSubscription) {\r\n      this.eventManager.destroy(this.userListSubscription);\r\n    }\r\n  }\r\n\r\n  setActive(user: User, isActivated: boolean): void {\r\n    this.userService.update({ ...user, activated: isActivated }).subscribe(() => this.loadAll());\r\n  }\r\n\r\n  trackIdentity(index: number, item: User): any {\r\n    return item.id;\r\n  }\r\n\r\n  deleteUser(user: User): void {\r\n    const modalRef = this.modalService.open(UserManagementDeleteDialogComponent, { size: 'lg', backdrop: 'static' });\r\n    modalRef.componentInstance.user = user;\r\n  }\r\n\r\n  transition(): void {\r\n    this.router.navigate(['./'], {\r\n      relativeTo: this.activatedRoute.parent,\r\n      queryParams: {\r\n        page: this.page,\r\n        sort: this.predicate + ',' + (this.ascending ? 'asc' : 'desc'),\r\n      },\r\n    });\r\n  }\r\n\r\n  private handleNavigation(): void {\r\n    combineLatest(this.activatedRoute.data, this.activatedRoute.queryParamMap, (data: Data, params: ParamMap) => {\r\n      const page = params.get('page');\r\n      this.page = page !== null ? +page : 1;\r\n      const sort = (params.get('sort') ?? data['defaultSort']).split(',');\r\n      this.predicate = sort[0];\r\n      this.ascending = sort[1] === 'asc';\r\n      this.loadAll();\r\n    }).subscribe();\r\n  }\r\n\r\n  private loadAll(): void {\r\n    this.userService\r\n      .query({\r\n        page: this.page - 1,\r\n        size: this.itemsPerPage,\r\n        sort: this.sort(),\r\n      })\r\n      .subscribe((res: HttpResponse<User[]>) => this.onSuccess(res.body, res.headers));\r\n  }\r\n\r\n  private sort(): string[] {\r\n    const result = [this.predicate + ',' + (this.ascending ? 'asc' : 'desc')];\r\n    if (this.predicate !== 'id') {\r\n      result.push('id');\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private onSuccess(users: User[] | null, headers: HttpHeaders): void {\r\n    this.totalItems = Number(headers.get('X-Total-Count'));\r\n    this.users = users;\r\n  }\r\n}\r\n"]}