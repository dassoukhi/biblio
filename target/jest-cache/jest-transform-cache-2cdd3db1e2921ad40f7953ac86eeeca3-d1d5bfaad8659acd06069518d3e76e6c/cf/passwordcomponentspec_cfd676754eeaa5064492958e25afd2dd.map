{"file":"C:\\Users\\Dass\\Desktop\\Master1_YNOV\\DevLogiciel\\biblio\\src\\test\\javascript\\spec\\app\\account\\password\\password.component.spec.ts","mappings":"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","names":[],"sources":["C:\\Users\\Dass\\Desktop\\Master1_YNOV\\DevLogiciel\\biblio\\src\\test\\javascript\\spec\\app\\account\\password\\password.component.spec.ts"],"sourcesContent":["import { ComponentFixture, TestBed, async } from '@angular/core/testing';\r\nimport { HttpResponse } from '@angular/common/http';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { of, throwError } from 'rxjs';\r\n\r\nimport { BiblioTestModule } from '../../../test.module';\r\nimport { PasswordComponent } from 'app/account/password/password.component';\r\nimport { PasswordService } from 'app/account/password/password.service';\r\n\r\ndescribe('Component Tests', () => {\r\n  describe('PasswordComponent', () => {\r\n    let comp: PasswordComponent;\r\n    let fixture: ComponentFixture<PasswordComponent>;\r\n    let service: PasswordService;\r\n\r\n    beforeEach(async(() => {\r\n      TestBed.configureTestingModule({\r\n        imports: [BiblioTestModule],\r\n        declarations: [PasswordComponent],\r\n        providers: [FormBuilder],\r\n      })\r\n        .overrideTemplate(PasswordComponent, '')\r\n        .compileComponents();\r\n    }));\r\n\r\n    beforeEach(() => {\r\n      fixture = TestBed.createComponent(PasswordComponent);\r\n      comp = fixture.componentInstance;\r\n      service = fixture.debugElement.injector.get(PasswordService);\r\n    });\r\n\r\n    it('should show error if passwords do not match', () => {\r\n      // GIVEN\r\n      comp.passwordForm.patchValue({\r\n        newPassword: 'password1',\r\n        confirmPassword: 'password2',\r\n      });\r\n      // WHEN\r\n      comp.changePassword();\r\n      // THEN\r\n      expect(comp.doNotMatch).toBe(true);\r\n      expect(comp.error).toBe(false);\r\n      expect(comp.success).toBe(false);\r\n    });\r\n\r\n    it('should call Auth.changePassword when passwords match', () => {\r\n      // GIVEN\r\n      const passwordValues = {\r\n        currentPassword: 'oldPassword',\r\n        newPassword: 'myPassword',\r\n      };\r\n\r\n      spyOn(service, 'save').and.returnValue(of(new HttpResponse({ body: true })));\r\n\r\n      comp.passwordForm.patchValue({\r\n        currentPassword: passwordValues.currentPassword,\r\n        newPassword: passwordValues.newPassword,\r\n        confirmPassword: passwordValues.newPassword,\r\n      });\r\n\r\n      // WHEN\r\n      comp.changePassword();\r\n\r\n      // THEN\r\n      expect(service.save).toHaveBeenCalledWith(passwordValues.newPassword, passwordValues.currentPassword);\r\n    });\r\n\r\n    it('should set success to true upon success', () => {\r\n      // GIVEN\r\n      spyOn(service, 'save').and.returnValue(of(new HttpResponse({ body: true })));\r\n      comp.passwordForm.patchValue({\r\n        newPassword: 'myPassword',\r\n        confirmPassword: 'myPassword',\r\n      });\r\n\r\n      // WHEN\r\n      comp.changePassword();\r\n\r\n      // THEN\r\n      expect(comp.doNotMatch).toBe(false);\r\n      expect(comp.error).toBe(false);\r\n      expect(comp.success).toBe(true);\r\n    });\r\n\r\n    it('should notify of error if change password fails', () => {\r\n      // GIVEN\r\n      spyOn(service, 'save').and.returnValue(throwError('ERROR'));\r\n      comp.passwordForm.patchValue({\r\n        newPassword: 'myPassword',\r\n        confirmPassword: 'myPassword',\r\n      });\r\n\r\n      // WHEN\r\n      comp.changePassword();\r\n\r\n      // THEN\r\n      expect(comp.doNotMatch).toBe(false);\r\n      expect(comp.success).toBe(false);\r\n      expect(comp.error).toBe(true);\r\n    });\r\n  });\r\n});\r\n"],"version":3}