{"version":3,"sources":["C:\\Users\\Dass\\Desktop\\Master1_YNOV\\DevLogiciel\\biblio\\src\\main\\webapp\\app\\entities\\emprunt\\emprunt-update.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { HttpResponse } from '@angular/common/http';\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport { FormBuilder, Validators } from '@angular/forms';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\n\r\nimport { IEmprunt, Emprunt } from 'app/shared/model/emprunt.model';\r\nimport { EmpruntService } from './emprunt.service';\r\nimport { IExemplaire } from 'app/shared/model/exemplaire.model';\r\nimport { ExemplaireService } from 'app/entities/exemplaire/exemplaire.service';\r\nimport { IUser } from 'app/core/user/user.model';\r\nimport { UserService } from 'app/core/user/user.service';\r\n\r\ntype SelectableEntity = IExemplaire | IUser;\r\n\r\n@Component({\r\n  selector: 'jhi-emprunt-update',\r\n  templateUrl: './emprunt-update.component.html',\r\n})\r\nexport class EmpruntUpdateComponent implements OnInit {\r\n  isSaving = false;\r\n  exemplaires: IExemplaire[] = [];\r\n  users: IUser[] = [];\r\n  dateEmpruntDp: any;\r\n\r\n  editForm = this.fb.group({\r\n    id: [],\r\n    dateEmprunt: [null, [Validators.required]],\r\n    exemplaire: [],\r\n    user: [],\r\n  });\r\n\r\n  constructor(\r\n    protected empruntService: EmpruntService,\r\n    protected exemplaireService: ExemplaireService,\r\n    protected userService: UserService,\r\n    protected activatedRoute: ActivatedRoute,\r\n    private fb: FormBuilder\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.activatedRoute.data.subscribe(({ emprunt }) => {\r\n      this.updateForm(emprunt);\r\n\r\n      this.exemplaireService\r\n        .query({ filter: 'emprunt-is-null' })\r\n        .pipe(\r\n          map((res: HttpResponse<IExemplaire[]>) => {\r\n            return res.body || [];\r\n          })\r\n        )\r\n        .subscribe((resBody: IExemplaire[]) => {\r\n          if (!emprunt.exemplaire || !emprunt.exemplaire.id) {\r\n            this.exemplaires = resBody;\r\n          } else {\r\n            this.exemplaireService\r\n              .find(emprunt.exemplaire.id)\r\n              .pipe(\r\n                map((subRes: HttpResponse<IExemplaire>) => {\r\n                  return subRes.body ? [subRes.body].concat(resBody) : resBody;\r\n                })\r\n              )\r\n              .subscribe((concatRes: IExemplaire[]) => (this.exemplaires = concatRes));\r\n          }\r\n        });\r\n\r\n      this.userService.query().subscribe((res: HttpResponse<IUser[]>) => (this.users = res.body || []));\r\n    });\r\n  }\r\n\r\n  updateForm(emprunt: IEmprunt): void {\r\n    this.editForm.patchValue({\r\n      id: emprunt.id,\r\n      dateEmprunt: emprunt.dateEmprunt,\r\n      exemplaire: emprunt.exemplaire,\r\n      user: emprunt.user,\r\n    });\r\n  }\r\n\r\n  previousState(): void {\r\n    window.history.back();\r\n  }\r\n\r\n  save(): void {\r\n    this.isSaving = true;\r\n    const emprunt = this.createFromForm();\r\n    if (emprunt.id !== undefined) {\r\n      this.subscribeToSaveResponse(this.empruntService.update(emprunt));\r\n    } else {\r\n      this.subscribeToSaveResponse(this.empruntService.create(emprunt));\r\n    }\r\n  }\r\n\r\n  private createFromForm(): IEmprunt {\r\n    return {\r\n      ...new Emprunt(),\r\n      id: this.editForm.get(['id'])!.value,\r\n      dateEmprunt: this.editForm.get(['dateEmprunt'])!.value,\r\n      exemplaire: this.editForm.get(['exemplaire'])!.value,\r\n      user: this.editForm.get(['user'])!.value,\r\n    };\r\n  }\r\n\r\n  protected subscribeToSaveResponse(result: Observable<HttpResponse<IEmprunt>>): void {\r\n    result.subscribe(\r\n      () => this.onSaveSuccess(),\r\n      () => this.onSaveError()\r\n    );\r\n  }\r\n\r\n  protected onSaveSuccess(): void {\r\n    this.isSaving = false;\r\n    this.previousState();\r\n  }\r\n\r\n  protected onSaveError(): void {\r\n    this.isSaving = false;\r\n  }\r\n\r\n  trackById(index: number, item: SelectableEntity): any {\r\n    return item.id;\r\n  }\r\n}\r\n"]}