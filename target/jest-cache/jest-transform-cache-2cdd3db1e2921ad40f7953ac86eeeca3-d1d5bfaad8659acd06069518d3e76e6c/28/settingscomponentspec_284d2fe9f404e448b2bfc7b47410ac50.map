{"file":"C:\\Users\\Dass\\Desktop\\Master1_YNOV\\DevLogiciel\\biblio\\src\\test\\javascript\\spec\\app\\account\\settings\\settings.component.spec.ts","mappings":"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","names":[],"sources":["C:\\Users\\Dass\\Desktop\\Master1_YNOV\\DevLogiciel\\biblio\\src\\test\\javascript\\spec\\app\\account\\settings\\settings.component.spec.ts"],"sourcesContent":["import { ComponentFixture, TestBed, async } from '@angular/core/testing';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { throwError, of } from 'rxjs';\r\n\r\nimport { BiblioTestModule } from '../../../test.module';\r\nimport { AccountService } from 'app/core/auth/account.service';\r\nimport { Account } from 'app/core/user/account.model';\r\nimport { SettingsComponent } from 'app/account/settings/settings.component';\r\nimport { MockAccountService } from '../../../helpers/mock-account.service';\r\n\r\ndescribe('Component Tests', () => {\r\n  describe('SettingsComponent', () => {\r\n    let comp: SettingsComponent;\r\n    let fixture: ComponentFixture<SettingsComponent>;\r\n    let mockAuth: MockAccountService;\r\n    const accountValues: Account = {\r\n      firstName: 'John',\r\n      lastName: 'Doe',\r\n      activated: true,\r\n      email: 'john.doe@mail.com',\r\n      langKey: 'en',\r\n      login: 'john',\r\n      authorities: [],\r\n      imageUrl: '',\r\n    };\r\n\r\n    beforeEach(async(() => {\r\n      TestBed.configureTestingModule({\r\n        imports: [BiblioTestModule],\r\n        declarations: [SettingsComponent],\r\n        providers: [FormBuilder],\r\n      })\r\n        .overrideTemplate(SettingsComponent, '')\r\n        .compileComponents();\r\n    }));\r\n\r\n    beforeEach(() => {\r\n      fixture = TestBed.createComponent(SettingsComponent);\r\n      comp = fixture.componentInstance;\r\n      mockAuth = TestBed.get(AccountService);\r\n      mockAuth.setIdentityResponse(accountValues);\r\n    });\r\n\r\n    it('should send the current identity upon save', () => {\r\n      // GIVEN\r\n      mockAuth.saveSpy.and.returnValue(of({}));\r\n      const settingsFormValues = {\r\n        firstName: 'John',\r\n        lastName: 'Doe',\r\n        email: 'john.doe@mail.com',\r\n      };\r\n\r\n      // WHEN\r\n      comp.ngOnInit();\r\n      comp.save();\r\n\r\n      // THEN\r\n      expect(mockAuth.identitySpy).toHaveBeenCalled();\r\n      expect(mockAuth.saveSpy).toHaveBeenCalledWith(accountValues);\r\n      expect(mockAuth.authenticateSpy).toHaveBeenCalledWith(accountValues);\r\n      expect(comp.settingsForm.value).toEqual(settingsFormValues);\r\n    });\r\n\r\n    it('should notify of success upon successful save', () => {\r\n      // GIVEN\r\n      mockAuth.saveSpy.and.returnValue(of({}));\r\n\r\n      // WHEN\r\n      comp.ngOnInit();\r\n      comp.save();\r\n\r\n      // THEN\r\n      expect(comp.success).toBe(true);\r\n    });\r\n\r\n    it('should notify of error upon failed save', () => {\r\n      // GIVEN\r\n      mockAuth.saveSpy.and.returnValue(throwError('ERROR'));\r\n\r\n      // WHEN\r\n      comp.ngOnInit();\r\n      comp.save();\r\n\r\n      // THEN\r\n      expect(comp.success).toBe(false);\r\n    });\r\n  });\r\n});\r\n"],"version":3}